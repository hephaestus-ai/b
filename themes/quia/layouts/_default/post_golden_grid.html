{{ define "main" }}

{{ $baseDir := default "content" (default .Site.Params.base_dir .Params.base_dir) }}
{{ $maxCols := default 3 .Params.max_cols }}
{{ $twoThridsColsFloored := int (math.Max 1.0 (math.Floor (div (mul (float $maxCols) 2) 3))) }}
{{ $oneThridsColsFloored := int (math.Max 1.0 (math.Floor (div (mul (float $maxCols) 1) 3))) }}
{{ $showBorder := default true (default .Params.item_border) }}
{{ $truncateSummaryAfter := default 240 .Params.truncate_summary_after }}
{{ $plainifySummary := default true (default .Params.plainify_summary) }}
{{ $item_height := default "24em" .Params.item_height }}
{{ $enableLayoutAlternation := default false (default .Params.enable_layout_alternation) }}


<style>

  body {
	padding-left: 12.5em;
  }
  
  #main {
     margin-left:6em;
  }

  .content h1, .content h2, .content h3 {
  }

  /* --- Grid Container --- */
  .grid-container {
    display: grid;
    grid-template-columns: repeat({{ $maxCols }}, 1fr);
    gap: 1.5em;
    margin: 1.6em auto; /* Center the container horizontally */
    padding: 0em;
  }

  /* --- Individual Grid Item (Card) --- */
  .grid-item {
    background-color: var(--bg);
    {{ if $showBorder }}
    border: 1px solid var(--border);
    {{ else }}
    border: none;
    {{ end }}
    border-radius: 6px;
    overflow: hidden;
    display: flex;
    flex-direction: row;
    text-decoration: none;
    color: var(--fg); /* Using theme variable for text color */
	height:{{$item_height}};
  }
  
  .grid-item.reverse-order {
    flex-direction: row-reverse; /* Reverses the order of children */
  }

  /* --- Image within Grid Item --- */
  .grid-item img {

    height: 100%;
    object-fit: cover;
    border-bottom: 1px solid var(--border); /* Using theme variable for border */
	border-radius: 6px;
  }

  /* --- Content Area within Grid Item --- */
  .grid-item .content-padding {
    padding: 1em;
  }
  
  .thumbnail-padding {
    margin: auto;
	height: 90%;
	padding: 1em;
  }

  .grid-item h3 {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
	margin-right: 0em;
    font-size: 1.2em;
    line-height: 1.3;
    color: var(--link); /* Ensure heading color matches foreground */
  }

  .grid-item p {
    font-size: 0.9em;
    color: var(--fg-muted); /* Using theme variable for muted text */
    margin-bottom: 0;
    line-height: 1.4;
  }

  /* --- Links within Grid Items --- */
  .grid-item a {
    color: var(--link); /* Apply link color to the entire card link */
    text-decoration: none; /* Keep the card as a whole without an underline */
  }

  .grid-item a:hover {
    color: var(--link-hover);
  }

  .grid-item a:visited {
    color: var(--link-visited);
  }

	/* --- Pagination Styles (Refined) --- */
	.pagination {
	  text-align: center;
	  margin: 1em auto; /* Adjust margin as needed */
	  padding: 0 1.25em;
	  max-width: 1200px; /* Aligns with your grid container width */
	}

	.pagination ul {
	  list-style: none;
	  font-size: 18px;
	  padding: 0;
	  margin: 0;
	  display: inline-block; /* Centers the ul itself */
	  /* Add some spacing between the list of buttons and the navigation itself */
	  white-space: nowrap; /* Prevent wrapping of pagination items on small screens too early */
	}

	.pagination li {
	  display: inline-block; /* Use inline-block for better spacing control */
	  margin: 0; /* Slightly reduce spacing between buttons */
	  vertical-align: middle; /* Ensures consistent alignment if button sizes vary */
	}

	.pagination a,
	.pagination span {
	  display: inline-flex; /* Use flexbox for centering text within buttons */
	  align-items: center; /* Vertically center content */
	  justify-content: center; /* Horizontally center content */
	  min-width: 0.5em; /* Give buttons a minimum width for consistent sizing */
	  height: 0.5em; /* Give buttons a consistent height */
	  padding: 0.5em 0.15em; /* Adjusted padding, less horizontal as min-width takes over */
	  /* border: 1px solid var(--border); /* Use your theme's border color */
	  /* border-radius: 6px; /* Slightly rounded corners for a softer look, or 0 for sharp */
	  text-decoration: none;
	  font-size: 0.9em; /* Adjust font size if needed */
	  font-weight: 500; /* Make numbers a bit bolder */
	  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease; /* Smooth transitions */
	  box-sizing: border-box; /* Include padding and border in the element's total width and height */
	}

	/* Default state for non-active links */
	.pagination a {
	  color: var(--link); /* Link color for non-active pages */
	  background-color: var(--bg); /* Your default background color */
	  border-color: var(--border); /* Your default border color */
	}

	/* Hover state for links */
	.pagination a:hover {
	  background-color: var(--bg-alt); /* A slightly different background on hover */
	  color: var(--link-hover);
	  border-color: var(--link-hover); /* Or a slightly darker border */
	}

	/* Visited state (optional, can be same as normal link) */
	.pagination a:visited {
	  color: var(--link-visited); /* If you have a specific visited link color */
	}

	/* Active page (current page) */
	.pagination .page-item.active .page-link,
	.pagination .page-item.active span { /* Ensure span for active page is styled */
	  background-color: var(--primary); /* Use a primary accent color for active */
	  color: var(--primary-fg); /* Text color for the primary accent background */
	  border-color: var(--primary); /* Border color matching primary */
	  cursor: default; /* Indicate it's not clickable */
	}

	/* Disabled items (Previous/Next when at start/end) */
	.pagination .page-item.disabled .page-link,
	.pagination .page-item.disabled span { /* Target span for disabled as well */
	  color: var(--fg-muted); /* Muted text color for disabled */
	  background-color: var(--bg); /* Keep the background consistent */
	  border-color: var(--border); /* Keep the border consistent */
	  pointer-events: none; /* Prevent click events */
	  opacity: 0.6; /* Optionally make them slightly transparent */
	}

  @media (max-width: 1500px) {
    .grid-container {
      grid-template-columns: repeat({{ $twoThridsColsFloored }}, 1fr);
	  
    }
	
	body {padding-left:6em;}
	.content {
	margin-right: -7.5em;}

  }
  
  
  @media (max-width: 1200px) {
    .grid-container {
      grid-template-columns: repeat({{ $oneThridsColsFloored }}, 1fr);
	  
    }


  }



  @media (max-width: 900px) {
	body {
        margin-left: 3.5em;
		padding: 0;
	}
    .grid-container {
      grid-template-columns: 1fr;
    }
	.content {
	  margin-right: 0em;
	}
	#main {
	  margin-left:0em;
	}
  }
</style>


<section id="main">
<h1 style="width:fit-content;margin: 0 auto;font-size:26px;text-align:center;padding-left:0.5em;padding-bottom:0.5em;">.ðŸ™š {{ .Title }} ðŸ™˜.</h1>

    <article id="content" style="margin-top:1.6em;">
        {{ .Content | safeHTML }}
    </article>

  {{/* Define the number of items per page. IMPORTANT: This must be defined BEFORE you try to use .Paginator */}}
  {{ $items_per_page := default 30 .Params.items_per_page }}
  {{ $paginator := .Paginate .Pages.ByPublishDate.Reverse $items_per_page }}

  {{/* Set items per page from front matter or default to 12 */}}
  {{ $items_per_page := .Params.items_per_page | default 12 }}

  {{/* Create the paginator object */}}
  {{ $paginator := .Paginate .Pages.ByPublishDate.Reverse $items_per_page }}

  {{/* Call the partial, passing the current page context and the paginator */}}
  {{ partial "paginated-grid-display.html" (dict "context" . "paginator" $paginator) }}


</section>
{{ end }}