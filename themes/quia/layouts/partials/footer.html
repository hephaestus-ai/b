
<div class="footer">
<!-- <section>
   <h4 id="date"> {{ .Date.Format "Mon Jan 2, 2006" }} </h4>
  <h5 id="wordcount"> {{ .WordCount }} Words </h5> 
</section>-->

<ul class="bottomnav-menu">
<li class="nav-item">Copyright © 2025</li>
<li class="nav-item spacer"> • </li>
<li class="nav-item"><a href="/terms/index.html" class="nav-link text-uppercase font-weight-bold">Terms</a></li>
<li class="nav-item spacer"> • </li>
<li class="nav-item"><a href="/privacy/index.html" class="nav-link text-uppercase font-weight-bold">Privacy</a></li>
<li class="nav-item spacer"> • </li>
<li class="nav-item"><a href="#top">Top⮅</a></li>

</ul>

</div>

<script>
(function () {
  const toc = document.querySelector('.toc-scroll');
  if (!toc) return;

  // OPTIONAL: Clean up truly empty <li> nodes
  toc.querySelectorAll('li').forEach((li) => {
    if (li.textContent.trim() === '' && li.children.length === 0) {
      li.remove();
    }
  });

  // Add carets only to non-empty sublists
  toc.querySelectorAll('li').forEach((li) => {
    const sub = li.querySelector(':scope > ol');
    if (!sub) return;

    // Skip if sublist has only empty <li>s
    const hasVisibleChild = [...sub.children].some(
      el => el.tagName === 'LI' && el.textContent.trim() !== ''
    );
    if (!hasVisibleChild) return;

    li.classList.add('has-children');

    const btn = document.createElement('button');
    btn.className = 'toc-caret';
    btn.setAttribute('aria-label', 'Toggle section');
    btn.setAttribute('aria-expanded', 'false');
    btn.innerText = '+';

    const firstLink = li.querySelector(':scope > a');
    if (firstLink) {
      li.insertBefore(btn, firstLink);
    } else {
      li.prepend(btn);
    }

    function toggle() {
      const open = li.classList.toggle('open');
      btn.setAttribute('aria-expanded', String(open));
    }
    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      toggle();
    });
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); }
    });
  });

  const activeLinkSelector = location.hash
    ? 'a[href="' + location.hash + '"]'
    : 'a[aria-current="page"]';
  const active = toc.querySelector(activeLinkSelector);

  if (active) {
    let li = active.parentElement;
    while (li && li.matches('li')) {
      li.classList.add('open');
      const caret = li.querySelector(':scope > .toc-caret');
      if (caret) caret.setAttribute('aria-expanded', 'true');
      li = li.parentElement.closest('li');
    }
  }
})();
</script>

<script>
document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.post-toc').forEach(toc => {

    // Clean up empty list items
    toc.querySelectorAll('li').forEach(li => {
      if (li.textContent.trim() === '' && li.children.length === 0) {
        li.remove();
      }
    });

    // Process each list item
    toc.querySelectorAll('li').forEach(li => {
      const sub  = li.querySelector(':scope > ul, :scope > ol');
      const link = li.querySelector(':scope > a');

      // Create the caret button regardless
      const caret = document.createElement('button');
      caret.className = 'post-toc__toggle';
      caret.type = 'button';
      caret.textContent = '+';
      caret.setAttribute('aria-expanded', 'false');
      li.prepend(caret);

      // If no usable sublist, disable interaction but keep space
      const hasVisibleSub = sub && sub.querySelector('a');
      if (!hasVisibleSub) {
        caret.setAttribute('data-leaf', 'true');
        caret.disabled = true; // optional: prevents click
        return;
      }

      // Expand/collapse behavior
      sub.hidden = true;
      const toggle = () => {
        const open = caret.getAttribute('aria-expanded') === 'true';
        caret.setAttribute('aria-expanded', String(!open));
        sub.hidden = open;
      };

      caret.addEventListener('click', toggle);
      caret.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); }
      });

      // Auto-expand if this link matches the location hash
      if ((location.hash && link?.hash === location.hash) ||
          link?.matches('[aria-current="page"]')) {
        toggle();
      }
    });
  });
});
</script>



<!-- page dark mode stuff -->
<script>
(() => {
  const root = document.documentElement;
  const favicon = document.getElementById('favicon');

  // helper to flip theme + favicon
  const setLight = on => {
    root.classList.toggle('off-white', on);
    if (favicon) favicon.href = on ? '/media/favicon.png'
                                   : '/media/favicon-dark.png';
    localStorage.setItem('theme', on ? 'off-white' : 'dark');
  };

  // click delegation — one listener covers every button
  document.addEventListener('click', e => {
    if (e.target.closest('[data-theme-toggle]')) {
      setLight(!root.classList.contains('off-white'));
    }
  });
})();
</script>

<script src='{{ "/js/lightbox.js" | relURL }}'></script>
<!-- TODO remove if loads doesn't have tippy -->
<script src='{{ "/js/hovercard.js" | relURL }}'></script>


